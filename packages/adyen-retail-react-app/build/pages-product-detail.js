"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{17427:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(64572),n=r(15861),l=r(67294),o=r(45697),i=r.n(o),c=r(64593),d=r(86896),s=r(44012),u=r(25567),m=r(57747),p=r(28929),E=r(39391),g=r(97636),f=r(78462),y=r(352),_=r(26256),h=r(47962),b=r(8644),v=r(74092),S=r(82215),O=r(88087),I=r(64071),T=r(87334),P=r(47234);const C=({product:e})=>{const{formatMessage:t}=(0,d.Z)();return l.createElement(p.K,{direction:"row",spacing:[0,0,0,16]},l.createElement(S.U,{allowMultiple:!0,maxWidth:"896px",flex:[1,1,1,5]},l.createElement(O.Q,null,l.createElement("h2",null,l.createElement(I.K,{height:"64px"},l.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Product Detail"}],id:"product_detail.accordion.button.product_detail"})),l.createElement(T.X,null))),l.createElement(P.H,{mb:6,mt:4},l.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.longDescription}}))),l.createElement(O.Q,null,l.createElement("h2",null,l.createElement(I.K,{height:"64px"},l.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Size & Fit"}],id:"product_detail.accordion.button.size_fit"})),l.createElement(T.X,null))),l.createElement(P.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),l.createElement(O.Q,null,l.createElement("h2",null,l.createElement(I.K,{height:"64px"},l.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Reviews"}],id:"product_detail.accordion.button.reviews"})),l.createElement(T.X,null))),l.createElement(P.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),l.createElement(O.Q,null,l.createElement("h2",null,l.createElement(I.K,{height:"64px"},l.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Questions"}],id:"product_detail.accordion.button.questions"})),l.createElement(T.X,null))),l.createElement(P.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"})))),l.createElement(m.xu,{display:["none","none","none","block"],flex:4}))};C.propTypes={product:i().object};const x=C;var L=r(67182),M=r(31486),D=r(16550),k=r(80598),A=r(21598);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const N=()=>{const{formatMessage:e}=(0,d.Z)(),t=(0,D.k6)(),r=(0,D.TH)(),a=(0,_.Z)(),o=(0,k.useToast)(),i=(0,y.default)(),[S,O]=(0,l.useState)({}),I=l.useRef({}),T=(0,E.useCustomerId)(),{data:P}=(0,g.useCurrentBasket)(),C=(0,E.useShopperBasketsMutation)("addItemToBasket"),{res:w}=(0,h.useServerContext)();w&&w.set("Cache-Control",`max-age=${L.MAX_CACHE_AGE}`);const N=!(null!=P&&P.basketId),{productId:W}=(0,D.UO)(),R=new URLSearchParams(r.search),{data:Z,isLoading:H}=(0,E.useProduct)({parameters:{id:R.get("pid")||W,allImages:!0}},{keepPreviousData:!0}),K=null==Z?void 0:Z.type.set,{data:V}=(0,E.useCategory)({parameters:{id:null==Z?void 0:Z.primaryCategoryId,level:1}}),[q,B]=(0,l.useState)(V),z=(0,f.c1)(Z);(0,l.useEffect)((()=>{V&&B(V)}),[V]),(0,l.useEffect)((()=>{if(!z)return;const e=(0,M.DE)(`${r.pathname}${r.search}`,{pid:null==z?void 0:z.productId});t.replace(e)}),[z]);const{data:F,isLoading:Q}=(0,A.L)(),U=(0,E.useShopperCustomersMutation)("createCustomerProductListItem"),X=(t,r,a)=>{U.mutate({parameters:{listId:F.id,customerId:T},body:{quantity:a,productId:(null==r?void 0:r.productId)||(null==t?void 0:t.id),public:!1,priority:1,type:"product"}},{onSuccess:()=>{o({title:e(L.TOAST_MESSAGE_ADDED_TO_WISHLIST,{quantity:1}),status:"success",action:l.createElement(u.z,{variant:"link",onClick:()=>i("/account/wishlist")},e(L.TOAST_ACTION_VIEW_WISHLIST))})},onError:()=>{$()}})},G=(0,k.useToast)(),$=()=>{G({title:e(L.API_ERROR_MESSAGE),status:"error"})},Y=function(){var e=(0,n.Z)((function*(e){try{const t=e.map((({variant:e,quantity:t})=>({productId:e.productId,price:e.price,quantity:t})));return yield C.mutateAsync({parameters:{basketId:P.basketId},body:t}),a.sendAddToCart(t),e}catch(e){$(e)}}));return function(t){return e.apply(this,arguments)}}(),J=(0,l.useCallback)((()=>{Object.values(I.current).forEach((({validateOrderability:e})=>{e({scrollErrorIntoView:!1})}));const e=Object.keys(S),t=Z.setProducts.find((({id:t})=>!e.includes(t)));if(t){const{ref:e}=I.current[t.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0}),[Z,S]);return(0,l.useEffect)((()=>{Z&&Z.type.set?(a.sendViewProduct(Z),Z.setProducts.map((e=>{a.sendViewProduct(e)}))):Z&&a.sendViewProduct(Z)}),[Z]),l.createElement(m.xu,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},l.createElement(c.q,null,l.createElement("title",null,null==Z?void 0:Z.pageTitle),l.createElement("meta",{name:"description",content:null==Z?void 0:Z.pageDescription})),l.createElement(p.K,{spacing:16},K?l.createElement(l.Fragment,null,l.createElement(v.Z,{product:Z,category:(null==q?void 0:q.parentCategoryTree)||[],addToCart:()=>{const e=Object.values(S);return Y(e)},addToWishlist:X,isProductLoading:H,isBasketLoading:N,isWishlistLoading:Q,validateOrderability:J}),l.createElement("hr",null),Z.setProducts.map((e=>l.createElement(m.xu,{key:e.id,"data-testid":"child-product"},l.createElement(v.Z,{ref:function(t){I.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},product:e,isProductPartOfSet:!0,addToCart:(t,r)=>Y([{product:e,variant:t,quantity:r}]),addToWishlist:X,onVariantSelected:(e,t,r)=>{if(r)O((a=>j(j({},a),{},{[e.id]:{product:e,variant:t,quantity:r}})));else{const t=j({},S);delete t[e.id],O(t)}},isProductLoading:H,isBasketLoading:N,isWishlistLoading:Q}),l.createElement(x,{product:e}),l.createElement(m.xu,{display:["none","none","none","block"]},l.createElement("hr",null)))))):l.createElement(l.Fragment,null,l.createElement(v.Z,{product:Z,category:(null==q?void 0:q.parentCategoryTree)||[],addToCart:(e,t)=>Y([{product:Z,variant:e,quantity:t}]),addToWishlist:X,isProductLoading:H,isBasketLoading:N,isWishlistLoading:Q}),l.createElement(x,{product:Z})),l.createElement(p.K,{spacing:16},!K&&l.createElement(b.Z,{title:l.createElement(s.Z,{defaultMessage:[{type:0,value:"Complete the Set"}],id:"product_detail.recommended_products.title.complete_set"}),recommender:L.EINSTEIN_RECOMMENDERS.PDP_COMPLETE_SET,products:[Z],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==Z?void 0:Z.id}),l.createElement(b.Z,{title:l.createElement(s.Z,{defaultMessage:[{type:0,value:"You might also like"}],id:"product_detail.recommended_products.title.might_also_like"}),recommender:L.EINSTEIN_RECOMMENDERS.PDP_MIGHT_ALSO_LIKE,products:[Z],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==Z?void 0:Z.id}),l.createElement(b.Z,{key:r.key,title:l.createElement(s.Z,{defaultMessage:[{type:0,value:"Recently Viewed"}],id:"product_detail.recommended_products.title.recently_viewed"}),recommender:L.EINSTEIN_RECOMMENDERS.PDP_RECENTLY_VIEWED,mx:{base:-4,md:-8,lg:0}}))))};N.getTemplateName=()=>"product-detail",N.propTypes={match:i().object};const W=N}}]);
//# sourceMappingURL=pages-product-detail.js.map