"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[997],{22639:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(87462),o=n(45987),r=n(67294),i=n(77624),l=n(55512),s=n(83589),c=n(64859),u=n(54346),d=n(71293),m=n(14253),p=n(25567),f=n(45697),y=n.n(f),g=n(22359),v=n(86896);const E=["dialogTitle","confirmationMessage","primaryActionLabel","alternateActionLabel","onPrimaryAction","onAlternateAction"],h=e=>{let{dialogTitle:t=g.uQ.dialogTitle,confirmationMessage:n=g.uQ.confirmationMessage,primaryActionLabel:f=g.uQ.primaryActionLabel,alternateActionLabel:y=g.uQ.alternateActionLabel,onPrimaryAction:h=i.ZT,onAlternateAction:b=i.ZT}=e,_=(0,o.Z)(e,E);const{formatMessage:w}=(0,v.Z)(),O=()=>{b(),_.onClose()};return r.createElement(l.a,(0,a.Z)({isOpen:_.isOpen,isCentered:!0,onClose:O},_),r.createElement(s.Z,null),r.createElement(l._,null,r.createElement(c.x,null,w(t)),r.createElement(u.f,null,r.createElement(d.x,null,w(n))),r.createElement(m.m,null,r.createElement(p.z,{variant:"ghost",mr:3,onClick:O},w(y)),r.createElement(p.z,{variant:"solid",onClick:()=>{h(),_.onClose()}},w(f)))))};h.propTypes={isOpen:y().bool.isRequired,onOpen:y().func.isRequired,onClose:y().func.isRequired,dialogTitle:y().object,confirmationMessage:y().object,primaryActionLabel:y().object,alternateActionLabel:y().object,onPrimaryAction:y().func,onAlternateAction:y().func};const b=h},85500:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(87462),o=n(67294),r=n(45697),i=n.n(r),l=n(28929),s=n(57747),c=n(71293),u=n(25567),d=n(19385);const m=({heading:e,text:t,icon:n,buttonText:r,buttonProps:i,onButtonClick:m})=>o.createElement(l.K,{spacing:2,py:12,px:4,alignItems:"center",borderRadius:"base",background:"gray.50"},o.createElement(s.xu,null,n),o.createElement(l.K,{spacing:6,alignItems:"center"},o.createElement(s.xu,null,o.createElement(c.x,{align:"center",fontSize:"lg",fontWeight:"bold"},e),o.createElement(c.x,{align:"center",fontSize:"md",color:"gray.700"},t)),o.createElement(u.z,(0,a.Z)({onClick:m,leftIcon:o.createElement(d.pO,null)},i),r)));m.propTypes={heading:i().string,text:i().string,buttonText:i().string,icon:i().any,buttonProps:i().object,onButtonClick:i().func};const p=m},78264:(e,t,n)=>{n.d(t,{Z:()=>O});var a=n(67294),o=n(45697),r=n.n(o),i=n(44012),l=n(57747),s=n(28929),c=n(93717),u=n(71293),d=n(8540),m=n(81921),p=n(70559),f=n(44576),y=n(35092),g=n(1795),v=n(49078),E=n(27898),h=n(18641),b=n(77624),_=n(78462);const w=({product:e,primaryAction:t,secondaryActions:n,onItemQuantityChange:o=b.ZT,showLoading:r=!1})=>{const{stepQuantity:w,showInventoryMessage:O,inventoryMessage:I,quantity:C,setQuantity:A}=(0,_.jA)(e);return a.createElement(l.xu,{position:"relative","data-testid":`sf-cart-item-${e.productId}`},a.createElement(p.default,{variant:e},r&&a.createElement(E.Z,null),a.createElement(s.K,{layerStyle:"cardBordered",align:"flex-start"},a.createElement(c.k,{width:"full",alignItems:"flex-start",backgroundColor:"white"},a.createElement(f.default,{width:["88px","136px"],mr:4}),a.createElement(s.K,{spacing:3,flex:1},a.createElement(s.K,{spacing:1},a.createElement(y.default,null),a.createElement(g.default,null),a.createElement(m.J1,null,a.createElement(l.xu,{marginTop:2},a.createElement(v.default,{align:"left"})))),a.createElement(c.k,{align:"flex-end",justify:"space-between"},a.createElement(s.K,{spacing:1},a.createElement(u.x,{fontSize:"sm",color:"gray.700"},a.createElement(i.Z,{defaultMessage:[{type:0,value:"Quantity:"}],id:"product_item.label.quantity"})),a.createElement(h.Z,{step:w,value:C,min:0,clampValueOnBlur:!1,onBlur:t=>{const{value:n}=t.target;n||A(e.quantity)},onChange:(e,t)=>{t>=0?o(t).then((e=>e&&A(t))):""===e&&A(e)}})),a.createElement(s.K,null,a.createElement(m.sw,null,a.createElement(v.default,null)),a.createElement(l.xu,{display:["none","block","block","block"]},t))),a.createElement(l.xu,null,e&&O&&a.createElement(d.p,{in:!0},a.createElement(u.x,{color:"orange.600",fontWeight:600},I))),n)),a.createElement(l.xu,{display:["block","none","none","none"],w:"full"},t))))};w.propTypes={product:r().object,onItemQuantityChange:r().func,onAddItemToCart:r().func,showLoading:r().bool,isWishlistItem:r().bool,primaryAction:r().node,secondaryActions:r().node};const O=w},74045:(e,t,n)=>{n.d(t,{Z:()=>A});var a=n(87462),o=n(45987),r=n(67294),i=n(45697),l=n.n(i),s=n(30836),c=n(83589),u=n(38009),d=n(66205),m=n(54346),p=n(74092),f=n(64572),y=n(31486),g=n(16550),v=n(47775),E=n(80598),h=n(86896),b=n(67182),_=n(39391);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=["product","isOpen","onClose"],C=e=>{let{product:t,isOpen:n,onClose:i}=e,l=(0,o.Z)(e,I);const f=(e=>{const t=(0,g.TH)(),n=(0,g.k6)(),a=(0,h.Z)(),o=(0,E.useToast)(),[i,l]=(0,r.useState)(e),s=(0,v.c)(i),{isFetching:c}=(0,_.useProduct)({parameters:{id:null==s?void 0:s.productId}},{placeholderData:e,select:t=>t.id===e.productId?O(O({},e),t):t,onSuccess:e=>{l(e)},onError:()=>{o({title:a.formatMessage(b.API_ERROR_MESSAGE),status:"error"})}}),u=()=>{var e;const a=[...(null==i||null===(e=i.variationAttributes)||void 0===e?void 0:e.map((({id:e})=>e)))??[],"pid"],o=(0,y.nH)(`${t.search}`,a);n.replace({search:o})};return(0,r.useEffect)((()=>(u(),()=>{u()})),[]),(0,r.useEffect)((()=>{if(s){const{variationValues:e}=s,a=(0,y.DE)(`${t.pathname}${t.search}`,O(O({},e),{},{pid:s.productId}));n.replace(a)}}),[s]),{product:i,variant:s,isFetching:c}})(t);return r.createElement(s.u_,{size:"4xl",isOpen:n,onClose:i},r.createElement(c.Z,null),r.createElement(u.h,{containerProps:{"data-testid":"product-view-modal"}},r.createElement(d.o,null),r.createElement(m.f,{pb:8,bg:"white",paddingBottom:6,marginTop:6},r.createElement(p.Z,(0,a.Z)({showFullLink:!0,imageSize:"sm",product:f.product,isLoading:f.isFetching},l)))))};C.propTypes={isOpen:l().bool.isRequired,onOpen:l().func.isRequired,onClose:l().func.isRequired,product:l().object,isLoading:l().bool,actionButtons:l().node,onModalClose:l().func};const A=C},42620:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var a=n(15861),o=n(64572),r=n(67294),i=n(28929),l=n(22757),s=n(86896),c=n(44012),u=n(57747),d=n(93717),m=n(526),p=n(39391),f=n(352),y=n(80598),g=n(21598),v=n(85500),E=n(19385),h=n(78264),b=n(13498),_=n(25567),w=n(70559),O=n(74045),I=n(67182),C=n(97636),A=n(82126);const x=()=>{var e,t;const n=(0,w.useItemVariant)(),{data:o}=(0,C.useCurrentBasket)(),{formatMessage:i}=(0,s.Z)(),l=(null==n||null===(e=n.type)||void 0===e?void 0:e.master)||!1,u=null==n||null===(t=n.type)||void 0===t?void 0:t.set,d=(0,y.useToast)(),[m,f]=(0,r.useState)(!1),{isOpen:g,onOpen:v,onClose:E}=(0,b.q)(),h=(0,p.useShopperBasketsMutation)("addItemToBasket"),x=function(){var e=(0,a.Z)((function*(e,t){f(!0);const n=Boolean(e.setProducts),a=n?e.setProducts.map((e=>({productId:e.id||e.productId,price:e.price,quantity:t}))):[{productId:e.id||e.productId,price:e.price,quantity:t}];h.mutate({body:a,parameters:{basketId:null==o?void 0:o.basketId}},{onSuccess:()=>{d({title:i({defaultMessage:[{type:1,value:"quantity"},{type:0,value:" "},{type:6,value:"quantity",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" added to cart"}],id:"wishlist_primary_action.info.added_to_cart"},{quantity:n?t*e.setProducts.length:t}),status:"success"}),E()},onError:()=>{d({title:i(I.API_ERROR_MESSAGE),status:"error"})},onSettled:()=>{f(!1)}})}));return function(t,n){return e.apply(this,arguments)}}(),M={viewOptions:r.createElement(c.Z,{defaultMessage:[{type:0,value:"View Options"}],id:"wishlist_primary_action.button.view_options"}),viewFullDetails:r.createElement(c.Z,{defaultMessage:[{type:0,value:"View Full Details"}],id:"wishlist_primary_action.button.view_full_details"}),addToCart:r.createElement(c.Z,{defaultMessage:[{type:0,value:"Add to Cart"}],id:"wishlist_primary_action.button.add_to_cart"}),addSetToCart:r.createElement(c.Z,{defaultMessage:[{type:0,value:"Add Set to Cart"}],id:"wishlist_primary_action.button.add_set_to_cart"})};var P;return u?null!==(P=n.setProducts)&&void 0!==P&&P.every((e=>!Z(e)))?r.createElement(_.z,{variant:"solid",onClick:()=>x(n,n.quantity),w:"full",isLoading:m},M.addSetToCart):r.createElement(_.z,{as:A.default,href:`/product/${n.id}`,w:"full",variant:"solid",_hover:{textDecoration:"none"}},M.viewFullDetails):l?r.createElement(r.Fragment,null,r.createElement(_.z,{w:"full",variant:"solid",onClick:v},M.viewOptions),g&&r.createElement(O.Z,{isOpen:g,onOpen:v,onClose:E,product:n,addToCart:(e,t)=>x(e,t)})):r.createElement(_.z,{variant:"solid",onClick:()=>x(n,n.quantity),w:"full",isLoading:m},M.addToCart)},Z=e=>Boolean(null==e?void 0:e.variants);var M=n(87462),P=n(45697),L=n.n(P),S=n(78590),k=n(33470),T=n(63536),j=n(22639),R=n(77624);const q={dialogTitle:(0,k.defineMessage)({defaultMessage:[{type:0,value:"Confirm Remove Item"}],id:"confirmation_modal.remove_wishlist_item.title.confirm_remove"}),confirmationMessage:(0,k.defineMessage)({defaultMessage:[{type:0,value:"Are you sure you want to remove this item from your wishlist?"}],id:"confirmation_modal.remove_wishlist_item.message.sure_to_remove"}),primaryActionLabel:(0,k.defineMessage)({defaultMessage:[{type:0,value:"Yes, remove item"}],id:"confirmation_modal.remove_wishlist_item.action.yes"}),alternateActionLabel:(0,k.defineMessage)({defaultMessage:[{type:0,value:"No, keep item"}],id:"confirmation_modal.remove_wishlist_item.action.no"}),onPrimaryAction:R.ZT},D=({productListItemId:e,onClick:t=R.ZT})=>{const n=(0,w.useItemVariant)(),{data:o}=(0,T.useCurrentCustomer)(),{data:i}=(0,g.L)(),l=(0,b.q)(),u=(0,y.useToast)(),{formatMessage:d}=(0,s.Z)(),m=(0,p.useShopperCustomersMutation)("deleteCustomerProductListItem"),f=function(){var r=(0,a.Z)((function*(){try{const a=m.mutateAsync({parameters:{customerId:o.customerId,listId:null==i?void 0:i.id,itemId:e}});t(n.id,a),yield a,u({title:d({defaultMessage:[{type:0,value:"Item removed from wishlist"}],id:"wishlist_secondary_button_group.info.item_removed"}),status:"success"})}catch{u({title:d(I.API_ERROR_MESSAGE),status:"error"})}}));return function(){return r.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(S.h,{spacing:"6"},r.createElement(_.z,{variant:"link",size:"sm",onClick:()=>{l.onOpen()},"data-testid":`sf-wishlist-remove-${e}`},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Remove"}],id:"wishlist_secondary_button_group.action.remove"}))),r.createElement(j.Z,(0,M.Z)({},q,{onPrimaryAction:f},l)))};D.propTypes={productListItemId:L().string,onClick:L().func};const z=D;function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Q=()=>{var e,t;const n=(0,f.default)(),{formatMessage:o}=(0,s.Z)(),b=(0,y.useToast)(),[_,w]=(0,r.useState)(void 0),[O,C]=(0,r.useState)(!1),{data:A,isLoading:Z}=(0,g.L)(),M=null==A||null===(e=A.customerProductListItems)||void 0===e?void 0:e.map((e=>e.productId)),{data:P,isLoading:L}=(0,p.useProducts)({parameters:{ids:null==M?void 0:M.join(","),allImages:!0}},{enabled:(null==M?void 0:M.length)>0}),S=null==A||null===(t=A.customerProductListItems)||void 0===t?void 0:t.map(((e,t)=>{var n;return K(K({},e),{},{product:null==P||null===(n=P.data)||void 0===n?void 0:n[t]})})),k=(0,p.useShopperCustomersMutation)("updateCustomerProductListItem"),j=(0,p.useShopperCustomersMutation)("deleteCustomerProductListItem"),{data:R}=(0,T.useCurrentCustomer)(),q=function(){var e=(0,a.Z)((function*(e,t){C(!0),w(e);try{yield t}finally{C(!1),w(void 0)}}));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)((function*(e,t){let n=!1;w(t.productId);const a=K(K({},t),{},{quantity:parseInt(e)});delete a.product;const r={customerId:R.customerId,itemId:t.id,listId:null==A?void 0:A.id},i=parseInt(e)>0?k.mutateAsync({body:a,parameters:r}):j.mutateAsync({parameters:r});try{yield i,n=!0,w(void 0)}catch(e){b({title:o(I.API_ERROR_MESSAGE),status:"error"})}return n}));return function(t,n){return e.apply(this,arguments)}}(),B=S?L:Z;return r.createElement(i.K,{spacing:4,"data-testid":"account-wishlist-page"},r.createElement(l.X,{as:"h1",fontSize:"2xl"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Wishlist"}],id:"account_wishlist.title.wishlist"})),B&&r.createElement(u.xu,{"data-testid":"sf-wishlist-skeleton"},new Array(3).fill(0).map(((e,t)=>r.createElement(u.xu,{key:t,p:[4,6],my:4,border:"1px solid",borderColor:"gray.100",borderRadius:"base"},r.createElement(d.k,{width:"full",align:"flex-start"},r.createElement(m.O,{boxSize:["88px",36],mr:4}),r.createElement(i.K,{spacing:2},r.createElement(m.O,{h:"20px",w:"112px"}),r.createElement(m.O,{h:"20px",w:"84px"}),r.createElement(m.O,{h:"20px",w:"140px"}))))))),!B&&!S&&r.createElement(v.Z,{"data-testid":"empty-wishlist",icon:r.createElement(E.h_,{boxSize:8}),heading:o({defaultMessage:[{type:0,value:"No Wishlist Items"}],id:"account_wishlist.heading.no_wishlist"}),text:o({defaultMessage:[{type:0,value:"Continue shopping and add items to your wishlist."}],id:"account_wishlist.description.continue_shopping"}),buttonText:o({defaultMessage:[{type:0,value:"Continue Shopping"}],id:"account_wishlist.button.continue_shopping"}),buttonProps:{leftIcon:void 0},onButtonClick:()=>n("/")}),!B&&S&&S.map((e=>r.createElement(h.Z,{key:e.id,product:K(K({},e.product),{},{quantity:e.quantity}),showLoading:(k.isLoading||j.isLoading||O)&&_===e.productId,primaryAction:r.createElement(x,null),onItemQuantityChange:t=>D(t,e),secondaryActions:r.createElement(z,{productListItemId:e.id,onClick:q})}))))}}}]);
//# sourceMappingURL=pages-account-wishlist.js.map