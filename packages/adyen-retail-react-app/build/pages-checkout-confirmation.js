"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[778],{71577:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var n=a(15861),l=a(64572),r=a(67294),c=a(44012),i=a(33470),o=a(57747),u=a(22338),s=a(28929),m=a(22757),d=a(71293),p=a(65028),f=a(25567),E=a(74153),y=a(7405),g=a(5674),h=a(49289),v=a(93717),b=a(87536),_=a(16550),x=a(39391),k=a(38078),S=a(352),M=a(82126),w=a(45336),O=a(88439),A=a(62430),I=a(70559),j=a(44576),Z=a(35092),C=a(1795),K=a(49078),N=a(63536),D=a(67182);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const z="undefined"!=typeof window,W=()=>{var e,t,a,l,T,W,L,X,F,R,H,B,G,U;const{orderNo:Y}=(0,_.UO)(),q=(0,S.default)(),{data:Q}=(0,N.useCurrentCustomer)(),J=(0,x.useAuthHelper)(x.AuthHelpers.Register),{data:V}=(0,x.useOrder)({parameters:{orderNo:Y}},{enabled:!!Y&&z}),$=null==V?void 0:V.productItems.map((e=>e.productId)),{data:ee}=(0,x.useProducts)({parameters:{ids:null==$?void 0:$.join(",")}}),te=null==ee?void 0:ee.data.reduce(((e,t)=>P(P({},e),{},{[t.id]:t})),{}),ae=(0,b.cI)();if((0,r.useEffect)((()=>{var e,t,a;ae.reset({email:(null==V||null===(e=V.customerInfo)||void 0===e?void 0:e.email)||"",password:"",firstName:null==V||null===(t=V.billingAddress)||void 0===t?void 0:t.firstName,lastName:null==V||null===(a=V.billingAddress)||void 0===a?void 0:a.lastName})}),[V]),!V||!V.orderNo)return null;const ne=(0,k.getCreditCardIcon)(null===(e=V.paymentInstruments[0].paymentCard)||void 0===e?void 0:e.cardType),le=function(){var e=(0,n.Z)((function*(e){try{const t={customer:{firstName:e.firstName,lastName:e.lastName,email:e.email,login:e.email},password:e.password};yield J.mutateAsync(t),q("/account")}catch(e){if(!e.response)return void ae.setError("global",{type:"manual",message:D.API_ERROR_MESSAGE});const t=yield e.response.json(),a=r.createElement(r.Fragment,null,r.createElement(c.Z,{defaultMessage:[{type:0,value:"This email already has an account."}],id:"checkout_confirmation.message.already_has_account"})," ",r.createElement(M.default,{to:"/login",color:"blue.600"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Log in here"}],id:"checkout_confirmation.link.login"}))),n=/the login is already in use/i.test(t.detail)?a:D.API_ERROR_MESSAGE;ae.setError("global",{type:"manual",message:n})}}));return function(t){return e.apply(this,arguments)}}();return r.createElement(o.xu,{background:"gray.50"},r.createElement(u.W,{maxWidth:"container.md",py:{base:7,md:16},px:{base:0,md:4},"data-testid":"sf-checkout-confirmation-container"},r.createElement(s.K,{spacing:4},r.createElement(o.xu,{layerStyle:"card",rounded:[0,0,"base"],px:[4,4,6],py:[6,6,8]},r.createElement(s.K,{spacing:6},r.createElement(m.X,{align:"center",fontSize:["2xl"]},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Thank you for your order!"}],id:"checkout_confirmation.heading.thank_you_for_order"})),r.createElement(o.xu,null,r.createElement(u.W,{variant:"form"},r.createElement(s.K,{spacing:3},r.createElement(d.x,{align:"center"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Order Number"}],id:"checkout_confirmation.label.order_number"}),":"," ",r.createElement(d.x,{as:"span",fontWeight:"bold"},V.orderNo)),r.createElement(d.x,{align:"center"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"We will send an email to "},{type:8,value:"b",children:[{type:1,value:"email"}]},{type:0,value:" with your confirmation number and receipt shortly."}],id:"checkout_confirmation.message.will_email_shortly",values:{b:e=>r.createElement("b",null,e),email:V.customerInfo.email}})),r.createElement(p.L,null),r.createElement(f.z,{as:M.default,href:"/",variant:"outline"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Continue Shopping"}],id:"checkout_confirmation.link.continue_shopping"}))))))),Q.isGuest&&r.createElement(o.xu,{layerStyle:"card",rounded:[0,0,"base"],px:[4,4,6],py:[6,6,8]},r.createElement(u.W,{variant:"form"},r.createElement(m.X,{fontSize:"lg",marginBottom:6},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Create an account for faster checkout"}],id:"checkout_confirmation.heading.create_account"})),r.createElement("form",{onSubmit:ae.handleSubmit(le)},r.createElement(s.K,{spacing:4},(null===(t=ae.formState.errors)||void 0===t?void 0:t.global)&&r.createElement(E.b,{status:"error"},r.createElement(y.z,null),ae.formState.errors.global.message),r.createElement(O.default,{form:ae}),r.createElement(f.z,{type:"submit",width:"full",onClick:()=>ae.clearErrors("global"),isLoading:ae.formState.isSubmitting},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Create Account"}],id:"checkout_confirmation.button.create_account"})))))),r.createElement(o.xu,{layerStyle:"card",rounded:[0,0,"base"],px:[4,4,6],py:[6,6,8]},r.createElement(u.W,{variant:"form"},r.createElement(s.K,{spacing:6},r.createElement(m.X,{fontSize:"lg"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Delivery Details"}],id:"checkout_confirmation.heading.delivery_details"})),r.createElement(g.M,{columns:[1,1,2],spacing:6},r.createElement(s.K,{spacing:1},r.createElement(m.X,{as:"h3",fontSize:"sm"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Shipping Address"}],id:"checkout_confirmation.heading.shipping_address"})),r.createElement(w.default,{address:V.shipments[0].shippingAddress})),r.createElement(s.K,{spacing:1},r.createElement(m.X,{as:"h3",fontSize:"sm"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Shipping Method"}],id:"checkout_confirmation.heading.shipping_method"})),r.createElement(o.xu,null,r.createElement(d.x,null,V.shipments[0].shippingMethod.name),r.createElement(d.x,null,V.shipments[0].shippingMethod.description))))))),r.createElement(o.xu,{layerStyle:"card",rounded:[0,0,"base"],px:[4,4,6],py:[6,6,8]},r.createElement(u.W,{variant:"form"},r.createElement(s.K,{spacing:6},r.createElement(m.X,{fontSize:"lg"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Order Summary"}],id:"checkout_confirmation.heading.order_summary"})),r.createElement(s.K,{spacing:4},r.createElement(d.x,null,r.createElement(c.Z,{defaultMessage:[{type:6,value:"itemCount",options:{"=0":{value:[{type:0,value:"0 items"}]},one:{value:[{type:7},{type:0,value:" item"}]},other:{value:[{type:7},{type:0,value:" items"}]}},offset:0,pluralType:"cardinal"}],values:{itemCount:V.productItems.reduce(((e,t)=>e+t.quantity),0)},id:"checkout_confirmation.message.num_of_items_in_order"})),r.createElement(s.K,{spacing:5,align:"flex-start"},r.createElement(s.K,{spacing:5,align:"flex-start",width:"full",divider:r.createElement(h.i,null)},null===(a=V.productItems)||void 0===a?void 0:a.map(((e,t)=>{const a=(null==te?void 0:te[e.productId])||{},n=P(P(P({},e),a),{},{price:e.price});return r.createElement(I.default,{key:e.productId,index:t,variant:n},r.createElement(v.k,{width:"full",alignItems:"flex-start"},r.createElement(j.default,{width:"80px",mr:2}),r.createElement(s.K,{spacing:1,marginTop:"-3px",flex:1},r.createElement(Z.default,null),r.createElement(v.k,{width:"full",justifyContent:"space-between",alignItems:"flex-end"},r.createElement(C.default,{includeQuantity:!0}),r.createElement(K.default,null)))))}))),r.createElement(s.K,{w:"full",py:4,borderY:"1px",borderColor:"gray.200"},r.createElement(v.k,{justify:"space-between"},r.createElement(d.x,{fontWeight:"bold"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Subtotal"}],id:"checkout_confirmation.label.subtotal"})),r.createElement(d.x,{fontWeight:"bold"},r.createElement(i.FormattedNumber,{style:"currency",currency:null==V?void 0:V.currency,value:null==V?void 0:V.productSubTotal}))),null===(l=V.orderPriceAdjustments)||void 0===l?void 0:l.map((e=>r.createElement(v.k,{justify:"space-between",key:e.priceAdjustmentId},r.createElement(d.x,null,e.itemText),r.createElement(d.x,{color:"green.500"},r.createElement(i.FormattedNumber,{style:"currency",currency:null==V?void 0:V.currency,value:e.price}))))),r.createElement(v.k,{justify:"space-between"},r.createElement(v.k,{alignItems:"center"},r.createElement(d.x,{lineHeight:1},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Shipping"}],id:"checkout_confirmation.label.shipping"}),(null===(T=V.shippingItems[0].priceAdjustments)||void 0===T?void 0:T.length)>0&&r.createElement(d.x,{as:"span",ml:1},"(",r.createElement(c.Z,{defaultMessage:[{type:0,value:"Promotion applied"}],id:"checkout_confirmation.label.promo_applied"}),")")),(null===(W=V.shippingItems)||void 0===W||null===(L=W[0])||void 0===L||null===(X=L.priceAdjustments)||void 0===X?void 0:X.length)>0&&r.createElement(A.default,{ml:2},r.createElement(s.K,null,null===(F=V.shippingItems[0].priceAdjustments)||void 0===F?void 0:F.map((e=>r.createElement(d.x,{key:e.priceAdjustmentId,fontSize:"sm"},e.itemText)))))),null!==(R=V.shippingItems[0].priceAdjustments)&&void 0!==R&&R.some((({appliedDiscount:e})=>"free"===(null==e?void 0:e.type)))?r.createElement(d.x,{as:"span",color:"green.500",textTransform:"uppercase"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Free"}],id:"checkout_confirmation.label.free"})):r.createElement(d.x,null,r.createElement(i.FormattedNumber,{value:V.shippingTotal,style:"currency",currency:V.currency}))),r.createElement(v.k,{justify:"space-between"},r.createElement(d.x,null,r.createElement(c.Z,{defaultMessage:[{type:0,value:"Tax"}],id:"checkout_confirmation.label.tax"})),r.createElement(d.x,null,r.createElement(i.FormattedNumber,{value:V.taxTotal,style:"currency",currency:V.currency})))),r.createElement(v.k,{w:"full",justify:"space-between"},r.createElement(d.x,{fontWeight:"bold"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Order Total"}],id:"checkout_confirmation.label.order_total"})),r.createElement(d.x,{fontWeight:"bold"},r.createElement(i.FormattedNumber,{style:"currency",currency:null==V?void 0:V.currency,value:null==V?void 0:V.orderTotal})))))))),r.createElement(o.xu,{layerStyle:"card",rounded:[0,0,"base"],px:[4,4,6],py:[6,6,8]},r.createElement(u.W,{variant:"form"},r.createElement(s.K,{spacing:6},r.createElement(m.X,{fontSize:"lg"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Payment Details"}],id:"checkout_confirmation.heading.payment_details"})),r.createElement(g.M,{columns:[1,1,2],spacing:6},r.createElement(s.K,{spacing:1},r.createElement(m.X,{as:"h3",fontSize:"sm"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Billing Address"}],id:"checkout_confirmation.heading.billing_address"})),r.createElement(w.default,{address:V.billingAddress})),r.createElement(s.K,{spacing:1},r.createElement(m.X,{as:"h3",fontSize:"sm"},r.createElement(c.Z,{defaultMessage:[{type:0,value:"Credit Card"}],id:"checkout_confirmation.heading.credit_card"})),r.createElement(s.K,{direction:"row"},ne&&r.createElement(ne,{layerStyle:"ccIcon"}),r.createElement(o.xu,null,r.createElement(d.x,null,null===(H=V.paymentInstruments[0].paymentCard)||void 0===H?void 0:H.cardType),r.createElement(s.K,{direction:"row"},r.createElement(d.x,null,"••••"," ",null===(B=V.paymentInstruments[0].paymentCard)||void 0===B?void 0:B.numberLastDigits),r.createElement(d.x,null,null===(G=V.paymentInstruments[0].paymentCard)||void 0===G?void 0:G.expirationMonth,"/",null===(U=V.paymentInstruments[0].paymentCard)||void 0===U?void 0:U.expirationYear))))))))))))}}}]);
//# sourceMappingURL=pages-checkout-confirmation.js.map