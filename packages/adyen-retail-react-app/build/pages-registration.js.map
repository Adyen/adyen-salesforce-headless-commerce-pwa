{"version":3,"file":"pages-registration.js","mappings":"kTAoBA,MAAMA,EAAeA,KACjB,MAAM,cAACC,IAAiBC,EAAAA,EAAAA,KAClBC,GAAWC,EAAAA,EAAAA,YACX,aAACC,IAAgBC,EAAAA,EAAAA,mBACjBC,GAAOC,EAAAA,EAAAA,MACPC,GAAWC,EAAAA,EAAAA,MACX,SAACC,IAAYC,EAAAA,EAAAA,MACbC,GAAWC,EAAAA,EAAAA,eAAcC,EAAAA,YAAYC,UAErCC,EAAU,eAAAC,GAAAC,EAAAA,EAAAA,IAAG,UAAOC,GACtB,MAAMC,EAAO,CACTC,SAAU,CACNC,UAAWH,EAAKG,UAChBC,SAAUJ,EAAKI,SACfC,MAAOL,EAAKK,MACZC,MAAON,EAAKK,OAEhBE,SAAUP,EAAKO,UAGnB,UACUd,EAASe,YAAYP,EAAM,CAAC,EACtC,CAAE,MAAOQ,GACLtB,EAAKuB,SAAS,SAAU,CAACC,KAAM,SAAUC,QAAS/B,EAAcgC,EAAAA,oBACpE,CACJ,IAAC,gBAhBeC,GAAA,OAAAhB,EAAAiB,MAAA,KAAAC,UAAA,KA6BhB,OAXAC,EAAAA,EAAAA,YAAU,KACFhC,GACAF,EAAS,WACb,GACD,CAACE,KAGJgC,EAAAA,EAAAA,YAAU,KACN5B,EAAS6B,aAAa3B,EAAS,GAChC,IAGC4B,EAAAA,cAACC,EAAAA,GAAG,CAAC,cAAY,oBAAoBC,GAAG,UAAUC,GAAI,CAAC,EAAG,KACtDH,EAAAA,cAACI,EAAAA,EAAG,CAACC,MAAM,eAAeC,YAAY,qBACtCN,EAAAA,cAACO,EAAAA,EAAS,CACNC,WAAY,GACZC,MAAO,CAAC,OAAQ,SAChBP,GAAG,QACHQ,cAAe,GACfC,UAAW,EACXC,aAAc,EACdC,aAAa,QAEbb,EAAAA,cAACc,EAAAA,EAAY,CACTpC,WAAYA,EACZV,KAAMA,EACN+C,YAAaA,IAAMnD,EAAS,aAGlC,EAIdH,EAAauD,gBAAkB,IAAM,eAErCvD,EAAawD,UAAY,CACrBC,MAAOC,IAAAA,QAGX,S","sources":["webpack://adyen-retail-react-app/./node_modules/@salesforce/retail-react-app/app/pages/registration/index.jsx"],"sourcesContent":["/*\n * Copyright (c) 2021, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport React, {useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport {useIntl} from 'react-intl'\nimport {Box, Container} from '@salesforce/retail-react-app/app/components/shared/ui'\nimport {AuthHelpers, useAuthHelper, useCustomerType} from '@salesforce/commerce-sdk-react'\nimport {useForm} from 'react-hook-form'\nimport {useLocation} from 'react-router-dom'\nimport Seo from '@salesforce/retail-react-app/app/components/seo'\nimport RegisterForm from '@salesforce/retail-react-app/app/components/register'\nimport useNavigation from '@salesforce/retail-react-app/app/hooks/use-navigation'\nimport useEinstein from '@salesforce/retail-react-app/app/hooks/use-einstein'\nimport {API_ERROR_MESSAGE} from '@salesforce/retail-react-app/app/constants'\n\nconst Registration = () => {\n    const {formatMessage} = useIntl()\n    const navigate = useNavigation()\n    const {isRegistered} = useCustomerType()\n    const form = useForm()\n    const einstein = useEinstein()\n    const {pathname} = useLocation()\n    const register = useAuthHelper(AuthHelpers.Register)\n\n    const submitForm = async (data) => {\n        const body = {\n            customer: {\n                firstName: data.firstName,\n                lastName: data.lastName,\n                email: data.email,\n                login: data.email\n            },\n            password: data.password\n        }\n\n        try {\n            await register.mutateAsync(body, {})\n        } catch (e) {\n            form.setError('global', {type: 'manual', message: formatMessage(API_ERROR_MESSAGE)})\n        }\n    }\n\n    useEffect(() => {\n        if (isRegistered) {\n            navigate('/account')\n        }\n    }, [isRegistered])\n\n    /**************** Einstein ****************/\n    useEffect(() => {\n        einstein.sendViewPage(pathname)\n    }, [])\n\n    return (\n        <Box data-testid=\"registration-page\" bg=\"gray.50\" py={[8, 16]}>\n            <Seo title=\"Registration\" description=\"Customer sign up\" />\n            <Container\n                paddingTop={16}\n                width={['100%', '407px']}\n                bg=\"white\"\n                paddingBottom={14}\n                marginTop={8}\n                marginBottom={8}\n                borderRadius=\"base\"\n            >\n                <RegisterForm\n                    submitForm={submitForm}\n                    form={form}\n                    clickSignIn={() => navigate('/login')}\n                />\n            </Container>\n        </Box>\n    )\n}\n\nRegistration.getTemplateName = () => 'registration'\n\nRegistration.propTypes = {\n    match: PropTypes.object\n}\n\nexport default Registration\n"],"names":["Registration","formatMessage","useIntl","navigate","useNavigation","isRegistered","useCustomerType","form","useForm","einstein","useEinstein","pathname","useLocation","register","useAuthHelper","AuthHelpers","Register","submitForm","_ref","_asyncToGenerator","data","body","customer","firstName","lastName","email","login","password","mutateAsync","e","setError","type","message","API_ERROR_MESSAGE","_x","apply","arguments","useEffect","sendViewPage","React","Box","bg","py","Seo","title","description","Container","paddingTop","width","paddingBottom","marginTop","marginBottom","borderRadius","RegisterForm","clickSignIn","getTemplateName","propTypes","match","PropTypes"],"sourceRoot":""}