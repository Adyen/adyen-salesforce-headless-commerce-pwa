"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[28],{37325:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(15861),r=s(67294),o=s(45697),n=s.n(o),i=s(33470),u=s(86896),d=s(57747),l=s(22338),c=s(39391),p=s(352),m=s(81437),g=s(87536),_=s(16550),f=s(26256),E=s(86269),h=s(67182),y=s(8218),A=s(77624);const v=(0,i.defineMessage)({defaultMessage:[{type:0,value:"Incorrect username or password, please try again."}],id:"login_page.error.incorrect_username_or_password"}),b=()=>{const{formatMessage:e}=(0,u.Z)(),t=(0,p.default)(),s=(0,g.cI)(),o=(0,_.TH)(),n=(0,f.Z)(),{isRegistered:i,customerType:b}=(0,c.useCustomerType)(),k=(0,c.useAuthHelper)(c.AuthHelpers.LoginRegisteredUserB2C),w=(0,c.useCustomerId)(),B=(0,y.D)(b),{data:C}=(0,c.useCustomerBaskets)({parameters:{customerId:w}},{enabled:!!w&&!A.sk,keepPreviousData:!0}),D=(0,c.useShopperBasketsMutation)("mergeBasket"),T=function(){var t=(0,a.Z)((function*(t){try{var a,r,o;yield k.mutateAsync({username:t.email,password:t.password});(null==C||null===(a=C.baskets)||void 0===a||null===(r=a[0])||void 0===r||null===(o=r.productItems)||void 0===o?void 0:o.length)>0&&"guest"===B&&D.mutate({headers:{"Content-Type":"application/json"},parameters:{createDestinationBasket:!0}})}catch(t){const a=/Unauthorized/i.test(t.message)?e(v):e(h.API_ERROR_MESSAGE);s.setError("global",{type:"manual",message:a})}}));return function(e){return t.apply(this,arguments)}}();return(0,r.useEffect)((()=>{var e;i&&(null!=o&&null!==(e=o.state)&&void 0!==e&&e.directedFrom?t(o.state.directedFrom):t("/account"))}),[i]),(0,r.useEffect)((()=>{n.sendViewPage(o.pathname)}),[]),r.createElement(d.xu,{"data-testid":"login-page",bg:"gray.50",py:[8,16]},r.createElement(m.Z,{title:"Sign in",description:"Customer sign in"}),r.createElement(l.W,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},r.createElement(E.Z,{form:s,submitForm:T,clickCreateAccount:()=>t("/registration"),clickForgotPassword:()=>t("/reset-password")})))};b.getTemplateName=()=>"login",b.propTypes={match:n().object};const k=b}}]);
//# sourceMappingURL=pages-login.js.map